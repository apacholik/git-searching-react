(window["webpackJsonpgit--searching-react"]=window["webpackJsonpgit--searching-react"]||[]).push([[0],{12:function(e,t,r){e.exports=r(23)},23:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(10),c=r.n(s),o=r(6),i=r.n(o),u=r(8),l=r(1),h=r(2),m=r(4),p=r(3),f=r(5),g=(r(18),r(19),r(11)),b=function(e){var t=e.children,r=e.onClick,a=e.className,s=e.sortIco,c=[n.a.createElement("span",{key:"desc",className:"icon"},n.a.createElement("i",{className:"fas fa-sort-down"})),n.a.createElement("span",{key:"asc",className:"icon"},n.a.createElement("i",{className:"fas fa-sort-up"}))];return n.a.createElement("th",{className:void 0===a?"has-text-centered":a,onClick:function(){return r()}},void 0!==s?c[Number(s)]:"",t)};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(r,!0).forEach(function(t){Object(g.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var O=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={sort:{by:"stars",isOrderByDESC:!0,type:"Number"}},r}return Object(f.a)(t,e),Object(h.a)(t,[{key:"changeSorting",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e===this.state.sort.by?this.setState(function(e){return{sort:{by:e.sort.by,isOrderByDESC:!e.sort.isOrderByDESC,type:e.sort.type}}},function(){t.props.onChangeSorting&&t.props.onChangeSorting(y({},t.state.sort))}):this.setState(function(){return{sort:{by:e,isOrderByDESC:!0,type:r}}},function(){t.props.onChangeSorting&&t.props.onChangeSorting(y({},t.state.sort))})}},{key:"sorting",value:function(){var e=this,t=this.state.sort.isOrderByDESC?-1:1;"String"===this.state.sort.type&&(t*=-1);var r=Function("return ".concat(this.state.sort.type))();this.props.children.sort(function(a,n){return r(a[e.state.sort.by])===r(n[e.state.sort.by])?0:r(a[e.state.sort.by])>r(n[e.state.sort.by])?1*t:-1*t})}},{key:"render",value:function(){var e=this;this.sorting();var t=this.props.numberOfRows||5;return n.a.createElement("table",{className:"table is-fullwidth table is-bordered"},n.a.createElement("thead",null,n.a.createElement("tr",null,this.props.tableHeadStructure.map(function(t){return n.a.createElement(b,{key:t.name,onClick:function(){return e.changeSorting(t.name,t.type)},sortIco:e.state.sort.by===t.name?e.state.sort.isOrderByDESC:void 0},t.text)}))),n.a.createElement("tbody",null,this.props.children.slice(this.props.startItemBy,t+this.props.startItemBy).map(function(e){return n.a.createElement("tr",{key:e.id},n.a.createElement("td",{className:"has-text-centered"},e.id),n.a.createElement("td",{className:"has-text-centered"},e.title),n.a.createElement("td",{className:"has-text-centered"},e.owner),n.a.createElement("td",{className:"has-text-centered"},e.stars),n.a.createElement("td",{className:"has-text-centered"},e.createAt))})))}}]),t}(n.a.Component),v=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(p.a)(t).call(this,e))).render=function(){return n.a.createElement("div",{className:"control has-icons-right"},n.a.createElement("input",{className:"input",type:"text",placeholder:"Search...",onChange:function(){return r.delayForWriteEnd()},ref:r.inputRef}),n.a.createElement("span",{className:"icon is-small is-right"},n.a.createElement("i",{className:"fas fa-search"})))},r.timeoutFingerprint=null,r.inputRef=new n.a.createRef,r}return Object(f.a)(t,e),Object(h.a)(t,[{key:"delayForWriteEnd",value:function(){var e=this;clearInterval(this.timeoutFingerprint),this.timeoutFingerprint=setTimeout(function(){if(clearInterval(e.timeoutFingerprint),!e.props.onChange)throw new ReferenceError("Not add props onChange");e.props.onChange(e.inputRef.current.value)},1500)}}]),t}(a.Component),E=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.pagesNumber,r=e.onClick,a=this.props.actualPage||1;if(!r)throw new ReferenceError("Not add props onChange");for(var s=[],c=function(e){s.push(n.a.createElement("button",{key:e,className:"button is-text ".concat(a===e?"is-active":""),onClick:function(){return r(e)}},e))},o=1;o<=t;o++)c(o);return s}}]),t}(a.Component),w=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){for(var e=this,t=this.props,r=t.maxNumberOfRows,a=t.stepBy,s=[],c=a;c<=r;c+=a)s.push(n.a.createElement("option",{key:c,value:c},c));return n.a.createElement("div",{className:"select is-small"},n.a.createElement("select",{onChange:function(t){e.props.onChange(t.target.value)}},s))}}]),t}(a.Component),S=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).state={githubRepos:[],pages:0,actualPage:1,startShowResultByItem:0,numberOfRows:5,tableHeadStructure:[{name:"id",type:"Number",text:"ID"},{name:"title",type:"String",text:"Repo Title"},{name:"owner",type:"String",text:"Owner"},{name:"stars",type:"Number",text:"Stars"},{name:"createAt",type:"String",text:"Create at"}]},e.requestStorage={},e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"searchInGithubRepositories",value:function(){var e=Object(u.a)(i.a.mark(function e(t){var r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.searchParameters=new URLSearchParams("q=test&sort=stars&order=desc&page=1"),this.searchParameters.set("q",t),r={},void 0===this.requestStorage[t]){e.next=7;break}r.items=this.requestStorage[t],e.next=10;break;case 7:return e.next=9,fetch("".concat("https://api.github.com/search/repositories","?").concat(this.searchParameters.toString())).then(function(e){return e.json()});case 9:r=e.sent;case 10:r.items?(this.requestStorage[t]=r.items,this.setState(function(e){return{githubRepos:r.items.map(function(e){var t=new Date(e.created_at);return{id:e.id,title:e.name,owner:e.owner.login,stars:e.stargazers_count,createAt:"".concat(t.getFullYear(),"-").concat(t.getMonth()<9?"0".concat(t.getMonth()+1):"".concat(t.getMonth()+1),"-").concat(t.getDate()<10?"0".concat(t.getDate()):"".concat(t.getDate()))}}),pages:r.items.length/e.numberOfRows}})):r.errors&&(a="I'hv got errors:",r.errors.forEach(function(e){a+="\n".concat(e.message)}),alert(a));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"goToPage",value:function(){var e=Object(u.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState(function(e){return{actualPage:t,startShowResultByItem:(t-1)*e.numberOfRows}}),window.scrollTo(0,0);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"changeNumberOfShownRows",value:function(e){var t=this,r=parseInt(e,10);this.setState(function(e){return{numberOfRows:r,pages:Math.round(e.pages*e.numberOfRows/r)}},function(){return t.goToPage(1)})}},{key:"render",value:function(){var e=this;return n.a.createElement("section",{className:"section"},n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column is-three-fifths is-offset-one-fifth-desktop is-12-touch"},n.a.createElement("div",{className:"columns is-multiline"},n.a.createElement("div",{className:"column is-full"},n.a.createElement(v,{onChange:function(t){return e.searchInGithubRepositories(t)}})),n.a.createElement("div",{className:"column is-full has-text-right"},n.a.createElement(w,{maxNumberOfRows:20,stepBy:5,onChange:function(t){return e.changeNumberOfShownRows(t)}}),n.a.createElement("span",null," rows per page")),n.a.createElement("div",{className:"column is-full"},n.a.createElement(O,{startItemBy:this.state.startShowResultByItem,numberOfRows:this.state.numberOfRows,tableHeadStructure:this.state.tableHeadStructure},this.state.githubRepos)),n.a.createElement("div",{className:"column is-full has-text-centered"},n.a.createElement(E,{pagesNumber:this.state.pages,actualPage:this.state.actualPage,onClick:function(t){return e.goToPage(t)}}))))))}}]),t}(a.Component);c.a.render(n.a.createElement(S,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.ba7ad595.chunk.js.map